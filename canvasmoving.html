<html>
<head>

<!-- jQuery -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript"></script>

<script type="application/x-javascript">

var canvas;
var canvas;
var x=0;
var y=0;
var left= false;
var right = false;
var up = false;
var down = false;
var choice = 10;
var dx =20;
var dy =20;

function init() {
//window.addEventListener('keydown',doKeyDown,true);

canvas = document.getElementById("canvas");
 
 	ctx = canvas.getContext("2d");
	x = canvas.width/2;
	y = canvas.height/2;
	run2();
}

function run2() {
	// start box in middle
// randomly choose a number in between 20-50 to move
// randomly choose a direction to loop (out of 9, bidirectional)
// loop the movement in that direction for the randomized number
// 1
// should draw from the start fine

// 2
distance = Math.floor(10*Math.random()+10); // this is how much I want to move forward
//alert(distance);
// 3
// hard code right for now

// 4
setInterval("draw()", 50);
setInterval("randomize()", 2000);
}

function randomize() {
	choice = Math.floor(8*Math.random()+1);
}

function draw() {
	clearCanvas();
	switch(choice) {
		case 1:
		y-=dy;
		break;
		case 2:
		x+=dx;
		break;
		case 3:
		y+=dy;
		break;
		case 4:
		x-=dx;
		break;
		case 5:
		x-=dx/2;
		y-=dy/2;
		break;
		case 6:
		x-=dx/2;
		y+=dy/2;
		break;
		case 7:
		x+=dx/2;
		y-=dy/2;
		break;
		case 8:
		x+=dx/2;
		y+=dy/2;
		break;
	}
	if(y<0 || y>canvas.height)	dy=-dy;
	if(x<0 || x>canvas.width) dx=-dx;
	ctx.fillRect(x,y,10,10);
}

function onKeyDown(evt) {
  if (evt.keyCode == 39) rightKey = true;
  else if (evt.keyCode == 37) leftKey = true;
  if (evt.keyCode == 38) upKey = true;
  else if (evt.keyCode == 40) downKey = true;
}

function onKeyUp(evt) {
  if (evt.keyCode == 39) rightKey = false;
  else if (evt.keyCode == 37) leftKey = false;
  if (evt.keyCode == 38) upKey = false;
  else if (evt.keyCode == 40) downKey = false;
}

function clearCanvas() {
	ctx.clearRect(0, 0, canvas.width, canvas.height);
}

$(document).keydown(onKeyDown);
$(document).keyup(onKeyUp);

</script>

<style type="text/css">

canvas {
	border: 1px solid black;
}
</style>

</head>
<body onLoad="init();">
<canvas id="canvas" height="500" width="500">
</canvas>

</body>
</html>
